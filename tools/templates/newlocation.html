<h6>Search for Available Locations</h6>
<div class='input-group col-md-6'>
  <div class='input-group-prepend'>
    <span class='input-group-text'>Enter Building Name or ID</span>
  </div>
  <input class='form-control' id="buildingSearch" type="text" placeholder="Search..">
</div>

<table id="buildingTable" class="table table-hover mt-2 col-md-10">
  <thead>
    <tr>
      <th>Building ID</th>
      <th>Building Name</th>
    </tr>
  </thead>
  <tbody>
    {% for building in building_list %}
      <tr id="{{ building.0 }}">
        <td>{{ building.0 }}</td>
        <td name="buildingName">{{ building.1 }}</td>
        <td id="buildingCampus" hidden>{{ building.2 }}</td>
      </tr>
    {% endfor %}
  </tbody>
</table>


<!-- <p>
  New Location Building Name or ID: 
  <input id="buildingSearch" type="text" placeholder="Search..">
=======
<p></p>
<h5>Search for New Location</h5>
  <div class = "row align-items-start" id = "select_loc">
      <div class = "input-group col-md-10">
          <div class ="input-group-prepend">
              <label class = "input-group-text" for="inv_dropdown">Building Name or ID</label>
          </div>
          <input id="buildingSearch" type="text" class = "form-control col-3" placeholder="Search..">
      </div>
  </div>
>>>>>>> f8e073aa96b8f0ceceeb7d4cf26acfbb81dabe8b


<table id="buildingTable" class="table table-hover">
  {% for building in building_list %}
    <tr id="{{ building.0 }}">
      <td>{{ building.0 }}</td>
      <td name="buildingName">{{ building.1 }}</td>
    </tr>
  {% endfor %}
  </table>
</p>
 -->
<div class='row' id='buildingFields'>
  <div class='col-md-4 mt-4'>
    <h6>Provide additional details.</h6>
    <div class='form-group'>
      <div class='input-group'>
        <div class='input-group-prepend'>
          <span class='input-group-text'>Enter a Floor Number</span>
        </div>
        <input type='text' method='GET' name='buildingFloor' id='buildingFloor' class='form-control'>
        <!-- <div class="invalid-feedback">Please enter a valid floor.</div> -->
      </div>

       <div id='roomselect' class='mt-4'>
        <div class='input-group'>
          <div class='input-group-prepend'>
            <span class='input-group-text'>Select a Room</span>
          </div>
          <select type="GET" name="buildingRoom" id="buildingRoom" class="form-control">
            <option value="%">--Select--</option>
          </select>
        </div>
       </div>

       <div id='jackselect' class='mt-4'>
        <div class='input-group'>
          <div class='input-group-prepend'>
            <span class='input-group-text'>Select a Jack</span>
          </div>
          <select type="GET" name="buildingJack" id="buildingJack" class="form-control">
            <option value="%">--Select--</option>
          </select>
        </div>
       </div>
    </div>
  </div>

  <div class='col-md-7 mt-5'>
    <strong>New Location</strong>
    <table class='table table-sm table-striped' id='new_loc_table' hidden>
      <thead>
        <tr>
          <th> Campus</th>
          <th>Building ID</th>
          <th>Buidling Name</th>
          <th>Floor</th>
          <th>Room</th>
          <th>Jack</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td id='campus'></td>
          <td id='buildingID'></td>
          <td id='buildingName'></td>
          <td id='floor'></td>
          <td id='room'></td>
          <td id='jack'></td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

<p class='mt-3' id='new_error' style='color:red;'></p>


 <p id='test'></p>

<!-- <div class="form-group mt-3">
    <div class="col-xs-4">
        <label for="id_OneTimeCharges">Building Code:</label>
        
        <input type="text"  method: "GET" name="buildingCode" id="buildingID" class=" form-control">

        <label for="id_OneTimeCharges">Building Name:</label>
        <input type="text"  method: "GET" name="buildingName" id="buildingName" class=" form-control">

        <label for="id_OneTimeCharges">Floor:</label>
        <input type="text" method: "GET" name="buildingFloor" id="buildingFloor" class=" form-control">
        <div class="invalid-feedback">Please enter floor.</div>

        <div id = "roomselect">
          <label for="id_OneTimeCharges">Room:</label>
            <select type = "GET" name = "buildingRoom" id="buildingRoom" class=" form-control">
              <option value = "%">--Select--</option>
            </select>
          {% comment %} <input type="text" method: "GET" name="buildingRoom" id="buildingRoom" class=" form-control"> {% endcomment %}
          <div class="invalid-feedback">Please enter room.</div>
        </div>
        <div id = "jackselect">
          <label for="id_OneTimeCharges">Jack:</label>
          <select type = "GET" name = "buildingJack" id="buildingJack" class=" form-control">
                <option value = "%">--Select--</option>
              </select>
          {% comment %} <input type="text" method: "GET" name="buildingJack" id="buildingJack" class=" form-control"> {% endcomment %}
          <div class="invalid-feedback">Please enter jack.</div>
        </div>
    </div>
</div> -->

<script>
  $(document).ready( function(){
    

    $('#buildingTable tr').click(function() {
        $("#roomselect").hide();
        $("#jackselect").hide();
        $('#floor').html('');
        $('#room').html('');
        $('#jack').html('');
        document.getElementById('buildingFloor').value = '';  
        var name = $(this).find("td").eq(1).html();   
        var code = $(this).find("td").eq(0).html();   
        $.ajax({
          type: "GET",
          url: "building/",
          data:{
            "buildingName":name,
            "buildingID":code,
          },
          dataType:'json',
          success: function(data) {
            // document.getElementById('n2').innerHTML = "Building Name: " + data.name;
            // document.getElementById('n3').innerHTML = "Building ID: " + data.code;  
            console.log(typeof data);
          },
          error: function(data) {
            alert("ok nice try guy");
          }
        });
    });

    $('input[type=text][name=buildingFloor]').on("keyup", function () {
        var code = $('#buildingID').text();
        var floor = $(this).val();
        $("#roomselect").hide();
        $("#jackselect").hide();
        $('#room').html('');
        $('#jack').html('');
        $.ajax({
          type: "GET",
          url: "floor/",
          data:{
            "buildingID": code,
            "buildingFloor": floor,
          },
          dataType:'json',
          success: function(data) {
            
            $('#floor').html(floor);
            $('#buildingRoom').empty();
            $('#test').html(data);
            var option = document.createElement("option");
            option.value = "%";
            option.text = "--Select--";
            document.getElementById('buildingRoom').appendChild(option);

            //document.getElementById('n4').innerHTML = "Floor: " + data.floor;
            for (var i =0; i < data.rooms.length; i++) {
              var option = document.createElement("option");
              option.value = data.rooms[i];
              option.text = data.rooms[i];
              document.getElementById('buildingRoom').appendChild(option);
            }
            if (data.floor != '')
              $("#roomselect").show();
            console.log(typeof data);
          },
          error: function(data) {
            alert("ok nice try guy");
          }
        });
    });

    $('#buildingRoom').change(function () {
        var code = $('#buildingID').text();
        var floor = $("#buildingFloor").val();
        var room = $(this).val();
        $('#jack').html('');
        $.ajax({
          type: "GET",
          url: "room/",
          data:{
            "buildingID": code,
            "buildingFloor": floor,
            "buildingRoom": room,
          },
          dataType:'json',
          success: function(data) {
            // document.getElementById('n5').innerHTML = "Room: " + data.room;

            $('#room').html(room);
            $('#buildingJack').empty();
            var option = document.createElement("option");
            option.value = "%";
            option.text = "--Select--";
            document.getElementById('buildingJack').appendChild(option);

            for (var i =0; i < data.jacks.length; i++) {
              var option = document.createElement("option");
              option.value = data.jacks[i];
              option.text = data.jacks[i];
              document.getElementById('buildingJack').appendChild(option);
            }
            console.log(typeof data);
            $("#jackselect").show();
          },
          error: function(data) {
            alert("ok nice try guy");
          }
        });
    });

    $('#buildingJack').change(function () {
        var jack = $(this).val();
        $.ajax({
          type: "GET",
          url: "jack/",
          data:{
            "buildingJack": jack,
          },
          dataType:'json',
          success: function(data) {
            $('#jack').html(jack);
            // document.getElementById('n6').innerHTML = "Jack: " + data.jack;
            console.log(typeof data);
          },
          error: function(data) {
            alert("ok nice try guy");
          }
        });
    });
  });
</script>
{% extends 'base.html' %}
{% block content %}

<p>{{ response }}</p>

<div class="container">
	<button onclick="topFunction()" id="scrollTop" title="Go to top"><i class="fas fa-chevron-up"></i><br>Scroll to top</button>

	<form action=".." method="POST" id="return">{% csrf_token %}
		<input type="hidden" name="chartcoms[]" value="{{ return_button.chartcoms }}">
		<input type="hidden" name="select_dept" value="{{ return_button.select_dept }}">
		<input type="hidden" name="bill_date" value="{{ return_button.bill_date }}">
		<div class="row-inline">
			<strong>Report selection</strong>
			<a class="offset-2" href="../..">Edit your selection</a>
		</div>

		<div class="row">
			<div class="card border-dark col-md-5">
				<div class="card-body">
					<strong>Department:&nbsp;&nbsp;</strong>{{ dept }}<br>
					<strong>Billing Date:&nbsp;&nbsp;</strong>{{ billing_date }}<br>
					<strong style="float:left;">Chartfields:&nbsp;&nbsp;</strong>
					<p style="float:left;">
					{% for c in chartcoms %}
						{{ c }}<br>
					{% endfor %}
					</p>
				</div>
			</div>
		</div>

		<div class="row-inline mt-5">
			<strong>Subscriber Information</strong>
			<a id="return_link" class="offset-7" href="#" onclick="window.history.back();">Back to report</a>
		</div>

		<div class="row">
			<div class="card border-dark col-md-10">
				<div class="card-body">
					<strong>Billing ID:&nbsp;&nbsp;</strong>{{ user_id }}<br>
					<strong>Subscriber ID:&nbsp;&nbsp;</strong>{{ sub_id }}<br>
					<strong>Type:&nbsp;&nbsp;</strong>{{ charge_type }}<br>
					<strong>Username:&nbsp;&nbsp;</strong>{{ username }}<br>
				</div>
			</div>
		</div>

		<div class="row mt-5">
			<strong>Monthly Charges for Chartfield:&nbsp;</strong>
			<p>{{ chartcom }}</p>
		</div>
		<div class="card border-dark">
			<div class="card-body">
				{% if monthly_data %}
				<table class="table table-sm">
					<thead>
						<tr class="table-secondary">
							<th scope="col">Billing ID</th>
							<th scope="col">Description</th>
							<th scope="col">Unit Price</th>
							<th scope="col">Quantity</th>
							<th scope="col" style="text-align:right;">Total Charge</th>
						</tr>
					</thead>
					<tbody>
						{% for m in monthly_data %}
						<tr>
							<td>{{ m.item_code }}</td>
							<td>{{ m.desc }}</td>
							<td>{{ m.unit_price }}</td>
							<td>{{ m.quantity }}</td>
							<td style="text-align:right;">{{ m.total_charge }}</td>
						</tr>
						{% endfor %}
						<tr style="background-color:#F0AD4E;">
							<td><strong>Total</strong></td>
							<td></td>
							<td></td>
							<td></td>
							<td style="text-align:right;">{{ monthly_total }}</td>
						</tr>
					</tbody>
				</table>
				{% else %}
				<div class="col-md-9 mt-2">
			        <div class="alert alert-danger col-md-9" role="alert">
			            <i class="fas fa-exclamation-triangle" style="color:red"></i>
			            This billing ID does not have any monthly charges this month.
			        </div>
			    </div>
				{% endif %}
			</div>
		</div>

		<div class="row mt-5">
			<strong>Local Charges for Chartfield:&nbsp;</strong>
			<p>{{ chartcom }}</p>
		</div>
		<div class="card border-dark">
			<div class="card-body">
				{% if local %}
				<table class="table table-sm">
					<thead>
						<tr class="table-secondary">
							<th scope="col">Connect Date</th>
							<th scope="col">To Number</th>
							<th scope="col">Location</th>
							<th scope="col">Duration</th>
							<th scope="col" style="text-align:right;">Total Charge</th>
						</tr>
					</thead>
					<tbody>
						{% for l in local %}
						<tr>
							<td>{{ l.connect_date }}</td>
							<td>{{ l.to_num }}</td>
							<td>{{ l.location }}</td>
							<td>{{ l.duration }}</td>
							<td style="text-align:right;">{{ l.total_charge }}</td>
						</tr>
						{% endfor %}
						<tr style="background-color:#F0AD4E;">
							<td><strong>Total</strong></td>
							<td></td>
							<td></td>
							<td></td>
							<td style="text-align:right;">{{ local_total }}</td>
						</tr>
					</tbody>
				</table>
				{% else %}
				<div class="col-md-9 mt-2">
			        <div class="alert alert-danger col-md-9" role="alert">
			            <i class="fas fa-exclamation-triangle" style="color:red"></i>
			            This chartfield does not have any local charges this month.
			        </div>
			    </div>
				{% endif %}
			</div>
		</div>

		<div class="row mt-5">
			<strong>Toll Charges for Chartfield:&nbsp;</strong>
			<p>{{ chartcom }}</p>
		</div>
		<div class="card border-dark">
			<div class="card-body">
				{% if toll %}
				<table class="table table-sm">
					<thead>
						<tr class="table-secondary">
							<th scope="col">Connect Date</th>
							<th scope="col">To Number</th>
							<th scope="col">Location</th>
							<th scope="col">Duration</th>
							<th scope="col" style="text-align:right;">Total Charge</th>
						</tr>
					</thead>
					<tbody>
						{% for t in toll %}
						<tr>
							<td>{{ t.connect_date }}</td>
							<td>{{ t.to_num }}</td>
							<td>{{ t.location }}</td>
							<td>{{ t.duration }}</td>
							<td style="text-align:right;">{{ t.total_charge }}</td>
						</tr>
						{% endfor %}
						<tr style="background-color:#F0AD4E;">
							<td><strong>Total</strong></td>
							<td></td>
							<td></td>
							<td></td>
							<td style="text-align:right;">{{ toll_total }}</td>
						</tr>
					</tbody>
				</table>
				{% else %}
				<div class="col-md-9 mt-2">
			        <div class="alert alert-danger col-md-9" role="alert">
			            <i class="fas fa-exclamation-triangle" style="color:red"></i>
			            This chartfield does not have any toll charges this month.
			        </div>
			    </div>
				{% endif %}
			</div>
		</div>

		<div class="row mt-5">
			<strong>Total Charges for Chartfield:&nbsp;</strong>
			<p>{{ chartcom }}</p>
		</div>
		<div class="card border-dark">
			<div class="card-body">
				<table class="table table-sm">
					<tbody>
						<tr style="background-color:#F0AD4E;">
							<td><strong>Total</strong></td>
							<td style="text-align:right">{{ total }}</td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>

	</form>

</div>

{% endblock %}

{% block js %}

<script src="/../static/doc.js"></script> 

{% endblock %}
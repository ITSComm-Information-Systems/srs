{% extends 'base.html' %}
{% block content %}

    <!-- Beginning of Content -->
    <div id="main-content" class="container" role="main">
            <h1>Order Status</h1>
            <div class="container" role="main">
                <div class="row">
                    <div class="col-lg-12">
                        <!-- Beginning of Department name/Search -->
                        <div class="select-dept">
                            <div class="dept-name">
                                <h2>Viewing Department: {{department.id}} - {{department.name}}</h2>
                            </div>
                            <div class="input-group mb-3 dept-dropdown">
                                <div class="input-group-prepend">
                                    <label class="input-group-text">
                                        Select Department
                                    </label>
                                </div>
                                <select class="custom-select order-status-dropdown" id="order-status-options">
                                    <option selected>Select a department</option>
                                    {% for dept in dept_list %}
                                    <option name="dept" value="{{dept.dept}}">{{dept.dept}} - {{dept.name}}</option>
                                    {% endfor %}
                                </select>
                            </div>
                            <!-- End of Department Dropdown -->
                        </div>
                        <!-- End of Department Name/Search -->
    
                        <!-- Beginning of Filter/Search -->
                        <div class="filter-container">
                            <!-- Beginning of Search Bar -->
                            <div class="input-group mb-3 search-bar">
                                <div class="input-group-prepend">
                                    <span class="input-group-text">
                                        <i class="fas fa-search" aria-label="Search Icon"></i>
                                    </span>
                                </div>
                                <input type="text" class="form-control" placeholder="Search by pre-order or uniqname…"
                                    aria-label="Search by pre-order or uniqname…" aria-describedby="basic-addon2">
                            </div>
                            <!-- End of Search -->
    
                            <!-- Beginning of Order Status Filter Dropdown -->
                            <div class="input-group mb-3 order-status">
                                <div class="input-group-prepend">
                                    <label class="input-group-text">
                                        Filter By Order Status
                                    </label>
                                </div>
                                <select class="custom-select order-status-dropdown" id="order-status-options">
                                    <option selected>Select a status indicator</option>
                                    <option value="Submitted">Submitted</option>
                                    <option value="Scheduled">Scheduled for</option>
                                    <option value="Awaiting Billing">Done & Awaiting Billing</option>
                                    <option value="Billed">Billed</option>
                                    <option value="Cancelled">Cancelled</option>
                                </select>
                            </div>
                            <!-- End of Order Status Filter Dropdown -->
    
                            <!-- Beginning of Order Type Filter Dropdown -->
                            <div class="input-group mb-3 order-type">
                                <div class="input-group-prepend">
                                    <label class="input-group-text">Filter by Order Type</label>
                                </div>
                                <select class="custom-select order-type" id="order-type-options">
                                    <option selected>Select an Order Type</option>
                                    <option value="ITCOM">Telecommunications</option>
                                    <option value="MiStorage">MiStorage</option>
                                    <option value="MiServer">MiServer</option>
                                </select>
                            </div>
                            <!-- End of Order Type Filter Dropdown -->
                        </div>
                        <!-- End of Filter/Search -->
    
                        <!-- Beginning of table -->
                        <div class="table">
                            <table class="table table-hover table-striped table-sm">
                                <caption>List of Orders & their respective statuses</caption>
                                <!-- beginning of Table headers -->
                                <thead>
                                    <tr>
                                        <th scope="col">PreOrder #</th>
                                        <th scope="col">Date Submitted</th>
                                        <th scope="col">Submitted By</th>
                                        <th scope="col"> Service Type</th>
                                        <th scope="col">Order Details</th>
                                        <th scope="col">Charfield Billed</th>
                                        <th scope="col">Status <i class="fas fa-question-circle btn-link" aria-label="More Information icon" data-toggle="modal" data-target="#statusIndicatorModal"></i></th>
                                        <th scope="col">Cancel</th>
                                    </tr>
                                </thead>
                                <!-- End of table headers -->

                                <!-- Beginning of table body -->
                                <tbody>

                                    {% for order in order_list %}
                                    <!-- First table row -->
                                    <tr>
                                        <th scope="row">{{order.order_reference}}</th>
                                        <td>{{ order.create_date|date:"m/d/y" }}</td>
                                        <td>{{ order.created_by }}</td>
                                        <td>{{ order.service }}</td>
                                        <td>
                                            <ul>
                                                {% for item in order.items %}
                                                <li>
                                                    {{ item.description }}
                                                </li>
                                                {% endfor %}
                                            </ul>
                                        </td>
                                        <td>{{ order.chartcom }}</td>
                                        <td>{{order.status}}</td>
                                        <td>Cancel</td>
                                    </tr>
                                    <!-- end of table row 1 -->
                                    {% endfor %}
                                </tbody>
                                <!-- End of table body -->
                            </table>
                        </div>
                        <!-- end of table  -->
                        <!-- statusIndicatorModal -->
                        <div class="modal fade" id="statusIndicatorModal" tabindex="-1" role="dialog"
                        aria-labelledby="statusIndicatorModalLabel" aria-hidden="true">
                        <div class="modal-dialog" role="document">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="statusIndicatorModalLabel">Order Status Indicators</h5>
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                        <span aria-hidden="true">&times;</span>
                                    </button>
                                </div>
                                <div class="modal-body">
                                    {% autoescape off %}
                                    {{ status_help.bodytext }}
                                    {% endautoescape %}
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
                                </div>
                            </div>
                        </div>
                    </div>
    
                    </div>
                </div>
            </div>
        </div>
{% endblock %}

{% block js %}
<script>
    $(document).ready(function () {
        $('[data-toggle="popover"]').popover();
    });
</script>
{% endblock %}
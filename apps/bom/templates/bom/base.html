{% extends 'baseapps.html' %}

{% block title %}
<title>BOM - {{ title }}</title>
{% endblock title %}

{% block header %}
<header id="navbarSupportedContent">
	<nav class="navbar navbar-expand-lg" id="aux-nav" aria-label="Auxiliary Navigation">
		<div class="container">
			<div class="navbar-brand">
				<a href="/apps">Infrastructure Apps</a>
			</div>
			<button class="navbar-toggler ml-auto" type="button" data-toggle="collapse" data-target=".navbars"
				aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
				<i class="fas fa-bars text-light"></i>
			</button>
			<div class="collapse navbar-collapse navbars" aria-labelledby="aux-nav" role="navigation">
				<ul class="navbar-nav ml-auto">

					{% if user.is_authenticated %}
					<li class="nav-item dropdown ">
						<a class="nav-link dropdown-toggle {% if title == 'View My System Privileges' %}active{% endif %}"
							href="#" id="userDropdown" role="button" data-toggle="dropdown" aria-haspopup="true"
							aria-expanded="false">
							{{ user.get_full_name }}

						</a>
						<div class="dropdown-menu dropdown-menu-right" aria-labelledby="userDropdown">
							{% if user.is_staff %}
							<a class="dropdown-item" href="/admin/">Admin</a>
							{% endif %}

							{% if perms.oscauth.can_impersonate %}
							{% if not request.session.exit_users_pk %}
							<a class="dropdown-item" href="/auth/su_login/">Impersonate</a>
							{% endif %}
							{% endif %}
							{% if request.session.exit_users_pk %}
							<a class="dropdown-item" href="/auth/su/">Exit Impersonate</a>
							{% endif %}
							<a class="dropdown-item" href="/auth/logout/">Logout</a>
						</div>
					</li>
					{% else %}
					<li class="nav-item">
						<a class="nav-link" href="{% url 'oidc_authentication_init' %}">Login</a>
					</li>
					{% endif %}
				</ul>
			</div>
		</div>
	</nav>
	<nav class="navbar navbar-expand-lg" id="main-nav" aria-label="Main Site Navigation">
		<div class="container">
			<div class="collapse navbar-collapse navbars" aria-labelledby="main-nav" role="navigation">
				<ul class="navbar-nav nav-fill nav-bar-links">
					<li class="nav-item dropdown">

						<a href="/apps/bom/search" class="nav-link"><i class="fas fa-search"></i> Search</a>

						<div class="dropdown-menu dropdown-menu-right" aria-labelledby="userDropdown">
							<a class="dropdown-item" href="/apps/bom/search?filter=open_workorder">Open
								Preorders/Workorders</a>
							<a class="dropdown-item" href="/apps/bom/search?filter=open_estimates">Open Estimates</a>
							<a class="dropdown-item" href="/apps/bom/search?filter=all_estimates">All
								Preorders/Workorder w/Estimates</a>
							<a class="dropdown-item" href="/apps/bom/netops/">Netops</a>
							{% if perms.bom.can_update_bom_ordered %}
							<a class="dropdown-item" href="/apps/bom/search?filter=warehouse">Warehouse</a>
							{% endif %}
						</div>

					</li>
					<li class="nav-item dropdown">
						<a href="/apps/bom/search?filter=assigned_to_me" class="nav-link"><i class="fas fa-tasks"></i>
							Assigned to Me</a>
					</li>
					<li class="nav-item dropdown">
						<a href="/apps/bom/item_lookup/" class="nav-link"><i class="fas fa-cog"></i> Item Lookup
							Search</a>
					</li>
				</ul>
			</div>
		</div>
	</nav>
</header>
{% endblock header %}